# OpenAI SDK / OpenLLMetry attribute mappings
# Sources: openllmetry, openai-python, openai-node instrumentation
# Last verified: 2024-12

vendor: openai
framework: openllmetry
description: >
  Mappings for OpenAI API calls instrumented via OpenLLMetry or
  direct OpenAI SDK tracing. Covers chat completions, embeddings,
  and function calling spans.

mappings:
  # Model
  llm.request.model: gen_ai.request.model
  llm.response.model: gen_ai.response.model

  # Provider
  llm.vendor: gen_ai.system

  # Token usage
  llm.usage.prompt_tokens: gen_ai.usage.input_tokens
  llm.usage.completion_tokens: gen_ai.usage.output_tokens
  llm.usage.total_tokens: gen_ai.usage.total_tokens

  # Request parameters
  llm.request.temperature: gen_ai.request.temperature
  llm.request.max_tokens: gen_ai.request.max_tokens
  llm.request.top_p: gen_ai.request.top_p
  llm.frequency_penalty: gen_ai.request.frequency_penalty
  llm.presence_penalty: gen_ai.request.presence_penalty
  llm.stop_sequences: gen_ai.request.stop_sequences

  # Response
  llm.response.finish_reason: gen_ai.response.finish_reasons
  llm.response.id: gen_ai.response.id

  # Content
  llm.prompt: gen_ai.prompt
  llm.completion: gen_ai.completion

  # Operation
  llm.request.type: gen_ai.operation.name

  # Cost
  llm.usage.cost: gen_ai.usage.cost

# Known span names emitted:
#   - openai.chat
#   - openai.completion
#   - openai.embeddings
#   - openai.chat.function_call
