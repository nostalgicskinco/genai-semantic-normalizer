# LangChain attribute mappings
# Sources: langchain-python, langchain-js, langsmith tracing
# Last verified: 2024-12

vendor: langchain
framework: langchain
description: >
  Mappings for LangChain instrumented spans. LangChain uses its
  own attribute namespace (langchain.*) and also emits some
  OpenLLMetry-compatible keys depending on the instrumentation
  library used.

mappings:
  # Model
  langchain.llm.model_name: gen_ai.request.model
  llm.model: gen_ai.request.model
  model_name: gen_ai.request.model

  # Provider
  langchain.llm.provider: gen_ai.system
  llm.provider: gen_ai.system

  # Token usage
  langchain.tokens.prompt: gen_ai.usage.input_tokens
  langchain.tokens.completion: gen_ai.usage.output_tokens
  llm.usage.prompt_tokens: gen_ai.usage.input_tokens
  llm.usage.completion_tokens: gen_ai.usage.output_tokens
  total_tokens: gen_ai.usage.total_tokens

  # Request parameters
  llm.temperature: gen_ai.request.temperature
  llm.max_tokens: gen_ai.request.max_tokens
  max_tokens: gen_ai.request.max_tokens
  llm.top_p: gen_ai.request.top_p

  # Response
  finish_reason: gen_ai.response.finish_reasons

  # Content
  llm.prompt: gen_ai.prompt
  llm.completion: gen_ai.completion

  # Cost
  llm.usage.cost_usd: gen_ai.usage.cost

# Known span names emitted:
#   - langchain.llm.call
#   - langchain.chain.call
#   - langchain.agent.call
#   - langchain.tool.call
#   - langchain.retriever.call
