# Anthropic SDK attribute mappings
# Sources: anthropic-python, anthropic-node, OpenLLMetry anthropic instrumentation
# Last verified: 2024-12

vendor: anthropic
framework: openllmetry
description: >
  Mappings for Anthropic Claude API calls. Anthropic uses a slightly
  different token naming (input_tokens/output_tokens natively) but
  OpenLLMetry wraps them in llm.* keys.

mappings:
  # Model
  llm.request.model: gen_ai.request.model
  llm.response.model: gen_ai.response.model
  llm.model: gen_ai.request.model

  # Provider
  llm.vendor: gen_ai.system

  # Token usage (Anthropic native names)
  input_tokens: gen_ai.usage.input_tokens
  output_tokens: gen_ai.usage.output_tokens

  # Token usage (OpenLLMetry wrapped)
  llm.usage.prompt_tokens: gen_ai.usage.input_tokens
  llm.usage.completion_tokens: gen_ai.usage.output_tokens
  llm.usage.total_tokens: gen_ai.usage.total_tokens

  # Request parameters
  llm.request.temperature: gen_ai.request.temperature
  llm.request.max_tokens: gen_ai.request.max_tokens
  llm.request.top_p: gen_ai.request.top_p

  # Response
  llm.response.finish_reason: gen_ai.response.finish_reasons
  llm.response.id: gen_ai.response.id
  llm.finish_reason: gen_ai.response.finish_reasons

  # Content
  llm.prompt: gen_ai.prompt
  llm.completion: gen_ai.completion

  # Operation
  llm.request.type: gen_ai.operation.name

  # Cost
  llm.usage.cost: gen_ai.usage.cost

# Known span names emitted:
#   - anthropic.messages
#   - anthropic.completion
